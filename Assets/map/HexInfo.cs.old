using System;
using UnityEngine;

public class HexInfo : MonoBehaviour {

    // Basic hexagon mesh making
    private Vector3[] Vertices;
    private Vector2[] uv;
    private int[] Triangles;

    // texture
    public Texture texture;

	// Use this for initialization
	void Start () {
        MeshSetup();
	}

    private void MeshSetup()
    {
        #region verts
        float floorLevel = 0;
        Vertices = new Vector3[]
        {
            new Vector3(-1f, floorLevel, -.5f),
            new Vector3(-1f, floorLevel, .5f),
            new Vector3(0f, floorLevel, 1f),
            new Vector3(1f, floorLevel,.5f),
            new Vector3(1f, floorLevel, -.5f),
            new Vector3(0f, floorLevel, -1f)
        };

        #endregion

        #region triangles

        Triangles = new int[]
        {
            1,5,0,
            1,4,5,
            1,2,4,
            2,3,4
        };

        #endregion

        #region uv

        uv = new Vector2[]
        {
            new Vector2(0,0.25f),
            new Vector2(0,0.75f),
            new Vector2(0.5f,1),
            new Vector2(1,0.75f),
            new Vector2(1,0.25f),
            new Vector2(0.5f,0)
        };

        #endregion

        #region finalize

        // Add mesh filter to the GameObject
        MeshFilter meshFilter = gameObject.AddComponent<MeshFilter>();
        // Add a mesh render to the GameObject
        gameObject.AddComponent<MeshRenderer>();

        // Create a mesh
        Mesh mesh = new Mesh();

        // Add the Vertices to the mesh
        mesh.vertices = Vertices;
        // Add the Triangles to the mesh
        mesh.triangles = Triangles;
        // Add the uv coordinates to the mesh
        mesh.uv = uv;

        // Recalcular las normales
        mesh.RecalculateNormals();

        // Set the GameObject's meshfilter's mesh a la que acabamos de crear
        meshFilter.mesh = mesh;

        // Test uv
        GetComponent<Renderer>().material.mainTexture = texture;

        #endregion
    }
}
